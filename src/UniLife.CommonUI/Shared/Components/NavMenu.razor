@using Microsoft.AspNetCore.Components;
@inject NavigationManager navigationManager
@inject AppState appState

<MatNavMenu Multi="false" Class="app-sidebar">

    @*Personel*@
    <AuthorizeView Roles="Personel" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                <MatIcon>home</MatIcon> <span class="miniHover">Öğrenci Bilgi Sistemi</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>





    @*Öğrencinin*@
    <AuthorizeView Roles="Ogrenci" Context="AuthorizeContext">
        <Authorized>
            <MatNavSubMenu>
                <MatNavSubMenuHeader>
                    <MatNavItem AllowSelection="false">
                        <MatIcon>stars</MatIcon><span class="miniHover">Genel İşlemler</span>
                    </MatNavItem>
                </MatNavSubMenuHeader>
                <MatNavSubMenuList>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Ders_Programi").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Ders Programı</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Sinav_Takvimi").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Sinav Programı</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademikTakvim").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Akademik Takvim</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_harc").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Harç Bilgileri</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_staj").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Staj bilgileri</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_hazirlik").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Hazırlık bilgileri</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_alDers").AbsoluteUri">
                        <MatIcon>screen_share</MatIcon> <span class="miniHover">Alınan Dersler</span>
                    </MatNavItem>

                </MatNavSubMenuList>
            </MatNavSubMenu>
        </Authorized>
    </AuthorizeView>


    @*Ogrenci*@
    <AuthorizeView Roles="Ogrenci" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Mufredat_Dersleri").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Müfredat Dersleri</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    @*Ogrenci*@
    <AuthorizeView Roles="Ogrenci" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Donem_Dersleri").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Dönem Dersleri</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>


    @*Öğprencinin*@
    <AuthorizeView Roles="Ogrenci" Context="AuthorizeContext">
        <Authorized>
            <MatNavSubMenu>
                <MatNavSubMenuHeader>
                    <MatNavItem AllowSelection="false">
                        <MatIcon>stars</MatIcon><span class="miniHover">Ders ve Dönem İşlemleri</span>
                    </MatNavItem>
                </MatNavSubMenuHeader>
                <MatNavSubMenuList>
                    @if (user == null ? false : (user.HasClaim("permission", Permissions.DersKayit.Read) &&
user.HasClaim("permission", Permissions.DersKayit.Create) &&
user.HasClaim("permission", Permissions.DersKayit.Update) &&
user.HasClaim("permission", Permissions.DersKayit.Delete)))
                    {
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("Ogrenci_derskayit").AbsoluteUri">
                            <MatIcon>business</MatIcon> <span class="miniHover">Ders Kayıt</span>
                        </MatNavItem>
                    }
                    else
                    {
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri" Disabled="true">
                            <MatIcon>business</MatIcon> <span class="miniHover">Ders Kayıt</span>
                        </MatNavItem>
                    }

                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_notListe").AbsoluteUri">
                        <MatIcon>screen_share</MatIcon> <span class="miniHover">Not Listesi</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Transkript").AbsoluteUri">
                        <MatIcon>screen_share</MatIcon> <span class="miniHover">Transkript</span>
                    </MatNavItem>

                </MatNavSubMenuList>
            </MatNavSubMenu>
        </Authorized>
    </AuthorizeView>

    @*ogrenci*@
    <AuthorizeView Roles="Ogrenci" Context="AuthorizeContext">
        <Authorized>
            <MatNavSubMenu>
                <MatNavSubMenuHeader>
                    <MatNavItem AllowSelection="false">
                        <MatIcon>stars</MatIcon><span class="miniHover">Kullanıcı İşlemleri</span>
                    </MatNavItem>
                </MatNavSubMenuHeader>
                <MatNavSubMenuList>

                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_Bilgi").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Özlük Bilgi</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_mesaj").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Gelen Mesajlar</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_belgetalep").AbsoluteUri">
                        <MatIcon>business</MatIcon> <span class="miniHover">Belge Talebi</span>
                    </MatNavItem>

                </MatNavSubMenuList>
            </MatNavSubMenu>
        </Authorized>
        <NotAuthorized>
            @*<MatNavItem Href="@navigationManager.ToAbsoluteUri("tanimlar").AbsoluteUri" Disabled="true">
                    <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Kullanıcı İşlemleri</span>
                </MatNavItem>*@
        </NotAuthorized>
    </AuthorizeView>






    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.DersVeMufredat))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>assignment_ind</MatIcon><span class="miniHover">Üniversite Tanımlamaları</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.AkadeTanim))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("tanimlar").AbsoluteUri">
                                <MatIcon>business</MatIcon> <span class="miniHover">Akademik Tanımlamalar</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.YoksisTanim))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("yoktanimlar").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">YÖKSİS Tanımlamaları</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.KampusBirimTanim))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("lokasyon_tanimlar").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Kampüs ve Birim Tanımlamaları</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.DigerTanim))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("digerTanimlar").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Diger Tanimlar</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (@AuthorizeContext.User.HasClaim("permission", Permissions.Menu.DersVeMufredat))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Ders Ve Müfredat</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Mufredat))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("MufredatTab").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Müfredat</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.DonemDers))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("donemdersleri").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Dönem Dersleri</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Sube))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("sube").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Şubelendirme</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.DersProgram))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ders_programi").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Ders Programı Planlama</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>


    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (@AuthorizeContext.User.HasClaim("permission", Permissions.Menu.SinavVeNot))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Sınav Ve Not</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.SinavIslemleri))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("SinavIslem").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Sınav İşlemleri</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.SinavListesi))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("SinavList").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Sinav Listesi</span>
                            </MatNavItem>
                        }



                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }

        </Authorized>
    </AuthorizeView>


    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.OgrenciIslem))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Öğrenci İşlemleri</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Ogrenciler))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_ogrenci_islem").AbsoluteUri">
                                <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Öğrenciler</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.TopluAtama))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_toplu_atama").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Toplu Atama</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.SinifAtlatma))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_sinif_atlatma").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Sınıf Atlatma</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.DersAktarim))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("Ogrenci_Ders_Aktarim").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Ders Aktarım</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.TopDersKayit))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("Ogrenci_Toplu_Ders_Kayit").AbsoluteUri">
                                <MatIcon>screen_share</MatIcon> <span class="miniHover">Toplu Ders Kayıt</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>



    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @*Todo*@
            @if (user.HasClaim("permission", Permissions.Menu.EKayit))
            {
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/EKayit").AbsoluteUri">
                    <MatIcon>supervisor_account</MatIcon> <span class="miniHover">E-Kayıt İşlemleri</span>
                </MatNavItem>
            }
            @if (user.HasClaim("permission", Permissions.Menu.AkadeIslem))
            {
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/akademisyen_islem").AbsoluteUri">
                    <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Akademisyen İşlemleri</span>
                </MatNavItem>
            }
            @if (user.HasClaim("permission", Permissions.Menu.PersonelIslem))
            {
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/personel_islem").AbsoluteUri">
                    <MatIcon>supervisor_account</MatIcon> <span class="miniHover">İdari Personel İşlemleri</span>
                </MatNavItem>
            }
        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.RaporVeIstatistik))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Rapor ve İstatistik</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.RaporOgrenci))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_rapor").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">OgrenciRapor</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.RaporOgrDers))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("ogrenci_ders_rapor").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">OgrenciDersRapor</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.DiplomaVeMezuniyet))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Diploma ve Mezuniyet</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Mezuniyet))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("mezuniyet").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Mezuniyet Onay</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Mezuniyet))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("MezuniyetBitir").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Mezuniyet Kabul</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Diploma))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri("diploma").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Diploma</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }

        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.PaydasKurum))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Paydaş Kurum İşlemleri</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Paydas))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Paydaş işlemler</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Kurum))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Kurum İşlemleri</span>
                            </MatNavItem>
                        }


                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.AktsTyyc))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">AKTS TYYÇ Kataloğu</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Akts))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Akts işlemler</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Tyyc))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">TYYÇ İşlemleri</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }

        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.UzakEgitim))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Uzaktan Eğitim İşlemleri</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Baglantilar))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Bağlantılar</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Ayarlar))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Ayarlar</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>

    @*Personel*@
    <AuthorizeView Context="AuthorizeContext">
        <Authorized>
            @if (user.HasClaim("permission", Permissions.Menu.DegProgram))
            {
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Değişim Programı İşlemleri</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        @if (user.HasClaim("permission", Permissions.Menu.Basvuru))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Başvurular</span>
                            </MatNavItem>
                        }
                        @if (user.HasClaim("permission", Permissions.Menu.Programlar))
                        {
                            <MatNavItem Href="@navigationManager.ToAbsoluteUri(" ").AbsoluteUri">
                                <MatIcon>touch_app</MatIcon> <span class="miniHover">Programlar</span>
                            </MatNavItem>
                        }
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            }
        </Authorized>
    </AuthorizeView>

    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_DersNot").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                <MatIcon>stars</MatIcon> <span class="miniHover">Not İşlemleri</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_Ders_Programı").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Ders Takvim</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>
    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_Sinav_Takvimi").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Sınav Takvim</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_Danismanlik").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Danışmanlık Ders Onay</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_Danismanlik_Mezun").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Danışmanlık Mezun Onay</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_stajNot").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Staj Not Girişi</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>

    @*Akademisyen*@
    <AuthorizeView Roles="Akademisyen" Context="AuthorizeContext">
        <Authorized>
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("akademisyen_bilgi").AbsoluteUri">
                <MatIcon>stars</MatIcon> <span class="miniHover">Akademik Bilgiler</span>
            </MatNavItem>
        </Authorized>
    </AuthorizeView>




    @*<AuthorizeView Policy="@Policies.IsUser" Context="AuthorizeContext">
            <Authorized>
                <MatNavSubMenu>
                    <MatNavSubMenuHeader>
                        <MatNavItem AllowSelection="false">
                            <MatIcon>stars</MatIcon><span class="miniHover">Temp</span>
                        </MatNavItem>
                    </MatNavSubMenuHeader>
                    <MatNavSubMenuList>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("todo_list").AbsoluteUri">
                            <MatIcon>list_alt</MatIcon> <span class="miniHover">Todo List</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("drag_and_drop").AbsoluteUri">
                            <MatIcon>touch_app</MatIcon> <span class="miniHover">Drag and Drop</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("screenshots").AbsoluteUri">
                            <MatIcon>screen_share</MatIcon> <span class="miniHover">Screenshots</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("paydas").AbsoluteUri">
                            <MatIcon>screen_share</MatIcon> <span class="miniHover">Paydaş İşlemler</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("deneme").AbsoluteUri">
                            <MatIcon>screen_share</MatIcon> <span class="miniHover">Raporlar</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("dashboard").AbsoluteUri">
                            <MatIcon>screen_share</MatIcon> <span class="miniHover">Dashboard</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("email_view").AbsoluteUri" Disabled="@(!IsLoggedIn)">
                            <MatIcon>inbox</MatIcon> <span class="miniHover">Read Email</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("email").AbsoluteUri" Disabled="@(!IsLoggedIn)">
                            <MatIcon>send</MatIcon> <span class="miniHover">Send Email</span>
                        </MatNavItem>
                        <MatNavItem Href="@navigationManager.ToAbsoluteUri("forum").AbsoluteUri" Disabled="@(!IsLoggedIn)">
                            <MatIcon>forum</MatIcon> <span class="miniHover">Forum</span>
                        </MatNavItem>
                    </MatNavSubMenuList>
                </MatNavSubMenu>
            </Authorized>
        </AuthorizeView>*@


    <AuthorizeView Policy="@Policies.IsAdmin" Context="AuthorizeContext">
        <Authorized>
            <MatNavSubMenu>
                <MatNavSubMenuHeader>
                    <MatNavItem AllowSelection="false">
                        <MatIcon>settings_applications</MatIcon> <span class="miniHover">Otomasyon Yönetimi</span>
                    </MatNavItem>
                </MatNavSubMenuHeader>
                <MatNavSubMenuList>

                    @*<MatNavItem Href="@navigationManager.ToAbsoluteUri("/admin/ogrislem").AbsoluteUri">
                            <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Ogr İşlem</span>
                        </MatNavItem>*@
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_users").AbsoluteUri">
                        <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Kullanıcılar</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_roles").AbsoluteUri">
                        <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Roller</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_Settings").AbsoluteUri">
                        <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Seçenekler</span>
                    </MatNavItem>
                    <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_blazor_middlware_audit").AbsoluteUri">
                        <MatIcon>change_history</MatIcon> <span class="miniHover">Api Audit Logları</span>
                    </MatNavItem>
                    @*<MatNavItem Href="@navigationManager.ToAbsoluteUri("admin/dBlogViewer").AbsoluteUri">
                            <MatIcon>notes</MatIcon> <span class="miniHover">DB Logları </span>
                        </MatNavItem>*@
                </MatNavSubMenuList>
            </MatNavSubMenu>
        </Authorized>
        @*<NotAuthorized>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("admin_users").AbsoluteUri" Disabled="true">
                    <MatIcon>supervisor_account</MatIcon> <span class="miniHover">Admin</span>
                </MatNavItem>
            </NotAuthorized>*@
    </AuthorizeView>


    @*@if (user == null ? false : user.HasClaim("permission", "Akademisyen.Update"))
        {
            <MatNavItem Href="@navigationManager.ToAbsoluteUri("sponsors").AbsoluteUri">
                <MatIcon>attach_money</MatIcon> <span class="miniHover">Sponsors</span>
            </MatNavItem>
        }*@

    @if (!IsLoggedIn || user.IsInRole(UserRoles.Personel.ToString()))
    {
        <MatNavSubMenu Class="asagiBos">
            <MatNavSubMenuHeader>
                <MatNavItem AllowSelection="false">
                    <MatIcon>stars</MatIcon><span class="miniHover">Online Başvuru İşlemleri</span>
                </MatNavItem>
            </MatNavSubMenuHeader>
            <MatNavSubMenuList>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Yabancı Başvuru</span>
                </MatNavItem>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Staj Başvurusu</span>
                </MatNavItem>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Erasmus Başvurusu</span>
                </MatNavItem>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Farabi Başvurusu</span>
                </MatNavItem>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Enstitü Başvurusu</span>
                </MatNavItem>
                <MatNavItem Href="@navigationManager.ToAbsoluteUri("/yabanci_Basvuru").AbsoluteUri" NavLinkMatch="NavLinkMatch.All">
                    <MatIcon>home</MatIcon> <span class="miniHover">Yatay Geçiş Başvurusu</span>
                </MatNavItem>
            </MatNavSubMenuList>
        </MatNavSubMenu>
    }

</MatNavMenu>

@code {
    public bool IsLoggedIn = false;

    [CascadingParameter]
    Task<AuthenticationState> authenticationStateTask { get; set; }

    ClaimsPrincipal user;

    protected override async Task OnParametersSetAsync()
    {
        IsLoggedIn = false;
        user = (await authenticationStateTask).User;

        if (user.Identity.IsAuthenticated)
        {
            IsLoggedIn = true;
        }

        appState.UserNavigationLoadRole = user.FindFirst("role") != null ? user.FindFirst("role").Value : null;
        //appState.UserNavigationLoadRole = user.FindFirst("role") != null ? string.Join(",", user.FindAll("permission")) : null;

        //appState.LogedInUser = user;
        //appState.GetLogedInUser();

        //if (user.IsInRole(UserRoles.Administrator.ToString()))
        //{
        //    // Perform some action only available to users in the 'admin' role
        //    //Console.WriteLine("Administrator");
        //    appState.UserNavigationLoadRole = UserRoles.Administrator.ToString();
        //}
        //if (user.IsInRole(UserRoles.Personel.ToString()))
        //{
        //    appState.UserNavigationLoadRole = UserRoles.Personel.ToString();
        //}
        //else if (user.IsInRole(UserRoles.Akademisyen.ToString()))
        //{
        //    appState.UserNavigationLoadRole = UserRoles.Akademisyen.ToString();
        //}
        //else if (user.IsInRole(UserRoles.Ogrenci.ToString()))
        //{
        //    appState.UserNavigationLoadRole = UserRoles.Ogrenci.ToString();
        //}
        //else
        //{
        //    appState.UserNavigationLoadRole = UserRoles.Anonim.ToString();
        //}
    }

    //protected override async Task OnInitializedAsync()
    //{
    //    user = (await authenticationStateTask).User;

    //}
}

<style>
    .asagiBos {
        margin-bottom: 40px;
    }
   /* :root {
         --mdc-theme-primary: unset;
    }*/

</style>